!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){},function(t,e,n){"use strict";n.r(e);n(0);function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.o1={x:e,y:n},this.o2={x:r,y:i}}var e,n,i;return e=t,(n=[{key:"width",get:function(){return this.o2.x-this.o1.x},set:function(t){this.o2.x=t+this.o1.x}},{key:"height",get:function(){return this.o2.y-this.o1.y},set:function(t){this.o2.y=t+this.o1.y}}])&&r(e.prototype,n),i&&r(e,i),t}();function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}var h=function(){function t(e,n,r,i){o(this,t),this._p=e,this.children=[],this._d=new u(e,n,r,!1),this._w=new u(e,n+e.HALF_PI,i,!1)}return a(t,[{key:"getCoords",value:function(t,e,n){this.a+=n;var r={tx:t+this._d.x,ty:e+this._d.y,rwx:t+this._w.x,rwy:e+this._w.y,lwx:t-this._w.x,lwy:e-this._w.y};return this.a-=n,r}},{key:"step",value:function(t,e,n){}},{key:"a",set:function(t){this._d.a=t,this._w.a=t+this._p.HALF_PI},get:function(){return this._d.a}},{key:"l",set:function(t){this._d.m=t},get:function(){return this._d.m}},{key:"r",set:function(t){this._w.m=t},get:function(){return this._w.m}}]),t}(),u=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];o(this,t),this._p=e,this._upCar=!i,this._upAng=i,this._upMag=i,this._changed=!0,this._x=i?n:0,this._y=i?r:0,this._a=i?0:n,this._m=i?0:r}return a(t,[{key:"_updateCartesian",value:function(){this._upCar&&(this._x=this._p.cos(this._a)*this._m,this._y=this._p.sin(this._a)*this._m,this._upCar=!1)}},{key:"check",value:function(){var t=this._changed;return this._changed=!1,t}},{key:"x",get:function(){return this._updateCartesian(),this._x},set:function(t){this._x=t,this._upAng=this._upMag=this._changed=!0}},{key:"y",get:function(){return this._updateCartesian(),this._y},set:function(t){this._y=t,this._upAng=this._upMag=this._changed=!0}},{key:"a",get:function(){return this._upAng&&(this._a=this._p.atan2(this._y,this._x),this._upAng=!1),this._a},set:function(t){this._a=t,this._upCar=this._changed=!0}},{key:"m",get:function(){return this._upMag&&(this._m=this._p.sqrt(this._x*this._x+this._y*this._y),this._upMag=!1),this._m},set:function(t){this._m=t,this._upCar=this._changed=!0}}],[{key:"add",value:function(e,n){return new t(e._p,e.x+n.x,e.y+n.y)}}]),t}();function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var w=function(t){function e(t,n,r,i,o){var s,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},h=a.growthRate,u=void 0===h?1:h,c=a.growSpread,f=void 0===c?18:c,p=a.branchRate,d=void 0===p?.05:p,w=a.branchSpread,_=void 0===w?45:w;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=l(this,y(e).call(this,t,n,0,0))).growth=0,s.growthState=0,s.growthRate=u,s.growSpread=f,s.branchRate=d,s.branchSpread=_,s.targetL=r,s.targetR=i,s.so=o,s}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(e,h),n=e,(r=[{key:"wrapAngle",value:function(t){var e=this._p;return t-2*e.PI*e.floor(t/(2*e.PI)+.5)}},{key:"step",value:function(t,n,r,i){var o=this,s=this._p,a=this.getCoords(t,n,r),h=a.tx,u=a.ty,c=a.rwx,f=a.rwy,l=a.lwx,y=a.lwy;switch(this.growthState){case 0:this.growth+=(1-this.growth)*this.growthRate,100==s.round(100*this.growth)&&(this.growth=1,this.growthState=1),this.l=this.growth*this.targetL,this.r=this.growth*this.targetR;var p=this.getCoords(t,n,r);if(h=p.tx,u=p.ty,c=p.rwx,f=p.rwy,l=p.lwx,y=p.lwy,h<i.o1.x){var d=this.wrapAngle(this.a+r),w=i.o1.x-t,_=s.sqrt(this.l*this.l-w*w);this._d.x=w,this._d.y=d>0?_:-_,this.a-=r;var g=this.getCoords(t,n,r);h=g.tx,u=g.ty,c=g.rwx,f=g.rwy,l=g.lwx,y=g.lwy}if(h>i.o2.x){var v=this.wrapAngle(this.a+r),b=i.o2.x-t,x=s.sqrt(this.l*this.l-b*b);this._d.x=b,this._d.y=v>0?x:-x,this.a-=r;var m=this.getCoords(t,n,r);h=m.tx,u=m.ty,c=m.rwx,f=m.rwy,l=m.lwx,y=m.lwy}if(u<i.o1.y){var O=this.wrapAngle(this.a+r+s.HALF_PI),S=i.o1.y-n,k=s.sqrt(this.l*this.l-S*S);this._d.y=S,this._d.x=O>0?k:-k,this.a-=r;var R=this.getCoords(t,n,r);h=R.tx,u=R.ty,c=R.rwx,f=R.rwy,l=R.lwx,y=R.lwy}if(u>i.o2.y){var C=this.wrapAngle(this.a+r+s.HALF_PI),P=i.o2.y-n,j=s.sqrt(this.l*this.l-P*P);this._d.y=P,this._d.x=C>0?j:-j,this.a-=r;var A=this.getCoords(t,n,r);h=A.tx,u=A.ty,c=A.rwx,f=A.rwy,l=A.lwx,y=A.lwy}break;case 1:if(this.so.COUNT-- >0)for(var E=s.random()<this.branchRate,L=E?2:1,F=E?this.branchSpread:this.growSpread,M=0;M<L;M++)this.children.push(new e(s,s.radians(s.random(-1,1)*F),this.targetL,this.targetR+.12*(.1-this.targetR),this.so,{branchRate:this.branchRate+.075*(.25-this.branchRate)}));this.growthState=0==this.children.length?3:2;break;case 3:s.random()<this.so.FLOWER_PROB&&this.so.FLOWERS.push({x:h,y:u,c:0,r:s.random(2,4),rate:s.random(.001,.05),col:[255,100,100].map(function(t){return t*(.5+s.random())})}),this.growthState=2}s.vertex(l,y),0==this.children.length?s.vertex(h,u):this.children.map(function(t){return t.step(h,u,o.a+r,i)}),s.vertex(c,f)}}])&&f(n.prototype,r),i&&f(n,i),e}();var _,g=100;new p5(function(t){function e(){_.o2.x=t.windowWidth-g,_.o2.y=t.windowHeight-g}t.setup=function(){t.createCanvas(t.windowWidth,t.windowHeight),_=new i(g,g),e(),_.draw=function(t,e){var n=new w(t,0,10,25,{COUNT:7e3,FLOWER_PROB:.8,FLOWERS:[]});return function(){t.fill(150),t.noStroke(),t.beginShape(),n.step(e.o1.x+.5*e.width,e.o2.y,t.radians(-90),e),t.endShape(),n.so.FLOWERS.map(function(e){e.c+=(1-e.c)*e.rate,t.fill.apply(t,d(e.col)),t.ellipse(e.x,e.y,e.c*e.r)})}}(t,_)},t.windowResized=function(){t.resizeCanvas(t.windowWidth,t.windowHeight),e()},t.draw=function(){t.background(220),t.noFill(),t.strokeWeight(1),t.stroke(150),t.rectMode(t.CORNERS),t.rect(_.o1.x,_.o1.y,_.o2.x,_.o2.y),_.draw()}})}]);